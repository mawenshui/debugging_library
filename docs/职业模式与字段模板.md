# 职业模式与字段模板（7 类）

本项目支持“职业/角色”模式：在【设置】中选择职业后，会影响【新建/编辑问题】里的环境信息模板，包括：

- 固定字段：显示为结构化输入（每类职业最多 6–8 个）
- 推荐自定义字段：作为 Key 下拉建议
- 新建默认模板行：新建问题时自动带出的自定义字段行（可删）

补充：固定字段可配置

- 设置 → 职业设置：可按职业勾选默认固定字段（最多 8 个），也可新增自定义字段并保存为“固定字段”
- 该配置仅影响 UI 渲染与默认勾选，不修改数据库 schema、不修改离线包 schema
- 配置落盘到本机配置文件（与用户名/职业选择同一套配置落盘机制）

## 设计约束（兼容导入导出）

- 不改数据库 schema、不改离线包 schema。
- 所有环境信息仍存入 `problem.environmentJson`（JSON 字符串，key/value 均为 string）。
- 离线导入/导出将 `environmentJson` 作为字符串原样读写，不解析内部字段，因此新增/调整 key 不会影响导入导出。

## 职业列表

| Id | 展示名 |
|---|---|
| general | 通用（默认） |
| hardware | 硬件工程师 |
| software | 软件工程师 |
| embedded | 嵌入式工程师 |
| ui | UI 工程师 |
| qa | 测试/QA |
| ops | 运维/现场实施 |

## 字段命名规范

- 固定字段使用稳定英文 key（写入 `environmentJson`），UI 用中文 label 展示。
- 自定义字段 key 为用户可编辑的自由文本，建议使用中文短语；如果与固定字段 key 冲突，保存时固定字段优先。

---

## 1) 通用（general）

### 固定字段（6–8）

- deviceModel：设备型号
- deviceVersion：设备版本
- workstation：工位/线体
- customer：客户
- ip：IP 地址（校验 IPv4/IPv6）
- port：端口（校验 1–65535）

### 推荐自定义字段（Key 下拉）

- 站点、项目、产线、设备编号、应用版本、操作系统、网络、备注

### 新建默认模板行

- 项目=（空）
- 应用版本=（空）
- 备注=（空）

---

## 2) 硬件工程师（hardware）

### 固定字段（6–8）

- deviceModel：设备型号
- deviceVersion：设备版本
- workstation：工位/线体
- customer：客户
- powerSupplyModel：电源型号
- powerSupplyVersion：电源版本
- ip：IP 地址（校验 IPv4/IPv6）
- port：端口（校验 1–65535）

### 推荐自定义字段（Key 下拉）

- 设备编号、供电电压、接地、EMI/ESD、继电器型号、传感器型号、线缆类型、安装环境、备注

### 新建默认模板行

- 设备编号=（空）
- 供电电压=（空）
- 接地=（空）
- 备注=（空）

---

## 3) 软件工程师（software）

### 固定字段（6–8）

- appName：应用名称
- appVersion：应用版本
- os：操作系统
- runtime：运行时（.NET/JRE/Node 等）
- deployEnv：环境（dev/staging/prod/现场）
- customer：客户
- traceId：TraceId/请求标识
- userAccount：用户账号

### 推荐自定义字段（Key 下拉）

- 代码分支、构建号、配置版本、依赖版本、数据库版本、API 地址、日志关键字、复现步骤、备注

### 新建默认模板行

- 复现步骤=（空）
- 日志关键字=（空）
- 备注=（空）

---

## 4) 嵌入式工程师（embedded）

### 固定字段（6–8）

- deviceModel：设备型号
- firmwareVersion：固件版本
- bootloaderVersion：Bootloader 版本
- socModel：SoC/MCU 型号
- toolchain：工具链/编译器版本
- rtos：RTOS/OS
- ip：IP 地址（校验 IPv4/IPv6）
- port：端口（校验 1–65535）

### 推荐自定义字段（Key 下拉）

- 板卡版本、外设型号、串口波特率、升级方式、日志片段、看门狗、内存/Flash、备注

### 新建默认模板行

- 板卡版本=（空）
- 升级方式=（空）
- 日志片段=（空）

---

## 5) UI 工程师（ui）

### 固定字段（6–8）

- clientApp：客户端应用
- clientVersion：客户端版本
- os：操作系统
- resolution：分辨率
- dpiScale：DPI/缩放
- theme：主题/配色
- locale：语言/区域
- gpuDriver：显卡/驱动

### 推荐自定义字段（Key 下拉）

- 复现步骤、UI 入口路径、截图/录屏、交互说明、崩溃堆栈、性能指标、备注

### 新建默认模板行

- UI 入口路径=（空）
- 复现步骤=（空）
- 备注=（空）

---

## 6) 测试/QA（qa）

### 固定字段（6–8）

- appName：应用名称
- appVersion：应用版本
- testEnv：测试环境
- buildNo：构建号
- deviceModel：设备型号
- os：操作系统
- severityHint：严重级别（建议）
- reproducibility：复现概率

### 推荐自定义字段（Key 下拉）

- 用例编号、测试数据、前置条件、复现步骤、期望结果、实际结果、日志关键字、备注

### 新建默认模板行

- 用例编号=（空）
- 复现步骤=（空）
- 期望结果=（空）
- 实际结果=（空）

---

## 7) 运维/现场实施（ops）

### 固定字段（6–8）

- site：站点
- customer：客户
- systemName：系统/项目
- deployEnv：环境（现场/测试/生产）
- hostName：主机名
- ip：IP 地址（校验 IPv4/IPv6）
- port：端口（校验 1–65535）
- versionCombo：版本组合（端/服务/固件）

### 推荐自定义字段（Key 下拉）

- 变更单号、告警编号、日志关键字、时间范围、服务名、数据库连接、回滚方案、备注

### 新建默认模板行

- 变更单号=（空）
- 告警编号=（空）
- 日志关键字=（空）
- 备注=（空）
